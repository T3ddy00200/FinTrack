<UserControl x:Class="FinTrack.Pages.SettingsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             Background="{DynamicResource BackgroundBrush}"
             Loaded="UserControl_Loaded">

    <Grid Margin="20">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <!-- 1) Выбор языка -->
                <ToggleButton x:Name="LanguageToggleButton"
                              Content="Выбрать язык"
                              Width="150" Height="30"
                              Margin="0,0,0,10"
                              Background="{DynamicResource AccentBrush}"
                              Foreground="White"/>
                <Popup x:Name="LanguagePopup"
                       Placement="Bottom"
                       PlacementTarget="{Binding ElementName=LanguageToggleButton}"
                       IsOpen="{Binding IsChecked, ElementName=LanguageToggleButton}"
                       AllowsTransparency="True"
                       StaysOpen="False"
                       Closed="LanguagePopup_Closed">
                    <Border Background="{DynamicResource PanelBackgroundBrush}"
                            BorderBrush="{DynamicResource BorderBrush}"
                            BorderThickness="1" CornerRadius="4">
                        <StackPanel>
                            <Button Content="Русский" Tag="ru"
                                    Click="LanguageButton_Click"
                                    Background="Transparent"
                                    Foreground="{DynamicResource TextBrush}"
                                    Padding="10"/>
                            <Button Content="English" Tag="en"
                                    Click="LanguageButton_Click"
                                    Background="Transparent"
                                    Foreground="{DynamicResource TextBrush}"
                                    Padding="10"/>
                        </StackPanel>
                    </Border>
                </Popup>

                <TextBlock Text="Настройки"
                           FontSize="24" FontWeight="Bold"
                           Foreground="{DynamicResource TextBrush}"
                           Margin="0,10,0,20"/>

                <!-- 2) Авторассылка -->
                <Expander Header="Автоуведомления"
                          IsExpanded="False"
                          Margin="0,0,0,20"
                          Foreground="{DynamicResource TextBrush}">
                    <StackPanel Margin="10">
                        <CheckBox x:Name="AutoSendEnabledCheckBox"
                                  Content="Включить автоотправку"
                                  Foreground="{DynamicResource TextBrush}"/>

                        <TextBlock Text="Тема уведомления:" Margin="0,10,0,2"
                                   Foreground="{DynamicResource TextBrush}"/>
                        <TextBox x:Name="AutoNotificationSubjectTextBox"
                                 Height="30"
                                 Background="{DynamicResource PanelBackgroundBrush}"
                                 Foreground="{DynamicResource TextBrush}"
                                 Margin="0,0,0,5"/>

                        <TextBlock Text="Текст уведомления:" Margin="0,5,0,2"
                                   Foreground="{DynamicResource TextBrush}"/>
                        <TextBox x:Name="AutoNotificationBodyTextBox"
                                 Height="100"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 Background="{DynamicResource PanelBackgroundBrush}"
                                 Foreground="{DynamicResource TextBrush}"
                                 Margin="0,0,0,5"/>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <Button Content="Имя {Name}"
                                    Click="InsertNameTag_Auto_Click"
                                    Width="100"
                                    Background="{DynamicResource HoverBrush}"
                                    Foreground="{DynamicResource TextBrush}"
                                    Margin="0,0,10,0"/>
                            <Button Content="Долг {Debt}"
                                    Click="InsertDebtTag_Auto_Click"
                                    Width="100"
                                    Background="{DynamicResource HoverBrush}"
                                    Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>

                        <TextBlock Text="Дата отправки:" Margin="0,0,0,2"
                                   Foreground="{DynamicResource TextBrush}"/>
                        <DatePicker x:Name="AutoNotificationDatePicker"
                                    Margin="0,0,0,5"/>

                        <TextBlock Text="Время отправки:" Margin="0,5,0,2" Foreground="{DynamicResource TextBrush}"/>
                        <xctk:TimePicker x:Name="AutoNotificationTimePicker"
                 Format="ShortTime"
                 ShowButtonSpinner="True"
                 Background="{DynamicResource PanelBackgroundBrush}"
                 Foreground="{DynamicResource TextBrush}"
                 Width="100"
                 Margin="0,0,0,10"/>





                        <Button Content="Сохранить настройки"
                                Click="SaveAutoNotificationText_Click"
                                Width="240"
                                Height="35"
                                Background="{DynamicResource AccentBrush}"
                                Foreground="White"
                                BorderBrush="{x:Null}"/>
                    </StackPanel>
                </Expander>

                <!-- 3) Настройки Email -->
                <TextBlock Text="Email отправителя:" Margin="0,0,0,2"
                           Foreground="{DynamicResource TextBrush}"/>
                <TextBox x:Name="SenderEmailBox"
                         Height="30" Margin="0,0,0,5"/>

                <TextBlock Text="Пароль для отправки:" Margin="0,0,0,2"
                           Foreground="{DynamicResource TextBrush}"/>
                <PasswordBox x:Name="SenderPasswordBox"
                             Height="30" Margin="0,0,0,5"/>

                <TextBlock Text="Пароль для чтения:" Margin="0,0,0,2"
                           Foreground="{DynamicResource TextBrush}"/>
                <PasswordBox x:Name="ReadPasswordBox"
                             Height="30" Margin="0,0,0,10"/>

                <Button Content="Сохранить Email"
                        Click="SaveEmailButton_Click"
                        Width="180" Height="40"
                        Background="{DynamicResource AccentBrush}"
                        Foreground="White"
                        BorderBrush="{x:Null}"/>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
